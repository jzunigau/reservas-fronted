{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jorge\\\\Desktop\\\\Reservas\\\\frontend\\\\src\\\\pages\\\\ReservasPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext, useEffect } from 'react';\nimport { AuthContext } from '../context/AuthContext';\nimport { obtenerReservas, guardarReserva, existeReservaEnSlot, formatearReservaDesdeFormulario, obtenerReservasPorFecha } from '../utils/reservasService';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst bloques = [{\n  id: 1,\n  hora: '08:00 - 10:00'\n}, {\n  id: 2,\n  hora: '10:00 - 12:00'\n}, {\n  id: 3,\n  hora: '12:00 - 14:00'\n}, {\n  id: 4,\n  hora: '14:00 - 16:00'\n}, {\n  id: 5,\n  hora: '16:00 - 18:00'\n}];\nconst diasSemana = ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes'];\nconst subBloques = ['1° hora', '2° hora'];\n\n// Función para obtener el número de semana y el rango de lunes a viernes\nfunction getSemanaInfo(fechaStr) {\n  if (!fechaStr) return null;\n  const fecha = new Date(fechaStr + 'T00:00:00');\n  // Obtener el día de la semana (0=domingo, 1=lunes, ...)\n  const diaSemana = fecha.getDay();\n  // Calcular el lunes de esa semana\n  const lunes = new Date(fecha);\n  lunes.setDate(fecha.getDate() - (diaSemana + 6) % 7);\n  // Calcular el viernes de esa semana\n  const viernes = new Date(lunes);\n  viernes.setDate(lunes.getDate() + 4);\n  // Número de semana ISO-8601\n  const temp = new Date(lunes.getTime());\n  temp.setHours(0, 0, 0, 0);\n  temp.setDate(temp.getDate() + 3 - (temp.getDay() + 6) % 7);\n  const firstThursday = temp.getTime();\n  temp.setMonth(0, 1);\n  if (temp.getDay() !== 4) {\n    temp.setMonth(0, 1 + (4 - temp.getDay() + 7) % 7);\n  }\n  const weekNumber = 1 + Math.round((firstThursday - temp.getTime()) / (7 * 24 * 3600 * 1000));\n  // Formatear fechas\n  const format = d => d.toLocaleDateString('es-ES', {\n    day: '2-digit',\n    month: '2-digit',\n    year: 'numeric'\n  });\n  return {\n    semana: weekNumber,\n    lunes: format(lunes),\n    viernes: format(viernes)\n  };\n}\nconst ReservasPage = () => {\n  _s();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [fechaSeleccionada, setFechaSeleccionada] = useState('');\n  const [modalAbierto, setModalAbierto] = useState(false);\n  const [reservaSeleccionada, setReservaSeleccionada] = useState(null);\n  const [formData, setFormData] = useState({\n    curso: '',\n    asignatura: '',\n    profesor: (user === null || user === void 0 ? void 0 : user.nombre) || '',\n    bloque: '',\n    fecha: '',\n    tipoBloque: 'completo'\n  });\n  const [reservasDelDia, setReservasDelDia] = useState([]);\n  const [todasLasReservas, setTodasLasReservas] = useState([]);\n  const semanaInfo = getSemanaInfo(fechaSeleccionada);\n  const obtenerFechaActual = () => {\n    const hoy = new Date();\n    return hoy.toISOString().split('T')[0];\n  };\n\n  // Cargar reservas cuando cambia la fecha\n  useEffect(() => {\n    const cargarReservas = async () => {\n      if (fechaSeleccionada) {\n        try {\n          const reservas = await obtenerReservasPorFecha(fechaSeleccionada);\n          setReservasDelDia(reservas);\n        } catch (error) {\n          console.error('Error al cargar reservas del día:', error);\n          setReservasDelDia([]);\n        }\n      } else {\n        setReservasDelDia([]);\n      }\n\n      // Cargar todas las reservas para el debug\n      try {\n        const todas = await obtenerReservas();\n        setTodasLasReservas(todas);\n      } catch (error) {\n        console.error('Error al cargar todas las reservas:', error);\n        setTodasLasReservas([]);\n      }\n    };\n    cargarReservas();\n  }, [fechaSeleccionada]);\n\n  // Al hacer click en una celda, guardar la info de la celda y abrir el modal\n  const handleCeldaClick = async (bloque, dia, subBloque) => {\n    try {\n      // Verificar si ya existe una reserva en este slot\n      const existe = await existeReservaEnSlot(fechaSeleccionada, dia, bloque.id, subBloque);\n      if (existe) {\n        alert('Ya existe una reserva en este horario. Selecciona otro slot disponible.');\n        return;\n      }\n      setReservaSeleccionada({\n        bloque,\n        dia,\n        subBloque\n      });\n      setFormData({\n        ...formData,\n        bloque: `${bloque.id} - ${bloque.hora} (${subBloque})`,\n        fecha: fechaSeleccionada,\n        profesor: (user === null || user === void 0 ? void 0 : user.nombre) || '',\n        tipoBloque: 'completo'\n      });\n      setModalAbierto(true);\n    } catch (error) {\n      console.error('Error al verificar disponibilidad:', error);\n      alert('Error al verificar disponibilidad. Inténtalo de nuevo.');\n    }\n  };\n\n  // Función para manejar cambios en el formulario\n  const handleInputChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  // Guardar la reserva usando el sistema de almacenamiento\n  const handleSubmitReserva = async e => {\n    e.preventDefault();\n    try {\n      const datosReserva = formatearReservaDesdeFormulario(formData, reservaSeleccionada);\n      const reservaGuardada = await guardarReserva(datosReserva);\n      if (reservaGuardada) {\n        // Actualizar la lista de reservas del día\n        const reservasActualizadas = await obtenerReservasPorFecha(fechaSeleccionada);\n        setReservasDelDia(reservasActualizadas);\n\n        // Actualizar todas las reservas para el debug\n        const todasActualizadas = await obtenerReservas();\n        setTodasLasReservas(todasActualizadas);\n\n        // Mostrar mensaje de éxito\n        alert(`¡Reserva creada exitosamente! \n        \nDetalles:\n- Curso: ${formData.curso}\n- Asignatura: ${formData.asignatura}\n- Fecha: ${formData.fecha}\n- Bloque: ${formData.bloque}\n- Profesor: ${formData.profesor}\n        \nLa reserva aparecerá automáticamente en el calendario público.`);\n      } else {\n        alert('Error al guardar la reserva. Inténtalo de nuevo.');\n      }\n      setModalAbierto(false);\n      setFormData({\n        curso: '',\n        asignatura: '',\n        profesor: (user === null || user === void 0 ? void 0 : user.nombre) || '',\n        bloque: '',\n        fecha: '',\n        tipoBloque: 'completo'\n      });\n    } catch (error) {\n      console.error('Error al procesar la reserva:', error);\n      alert('Error al procesar la reserva. Verifica tu conexión e inténtalo de nuevo.');\n    }\n  };\n  const cerrarModal = () => {\n    setModalAbierto(false);\n    setFormData({\n      curso: '',\n      asignatura: '',\n      profesor: (user === null || user === void 0 ? void 0 : user.nombre) || '',\n      bloque: '',\n      fecha: '',\n      tipoBloque: 'completo'\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-6xl mx-auto p-2 sm:p-3 lg:p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-1\",\n          children: \"Sistema de Reservas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 text-sm\",\n          children: \"Gestiona las reservas del laboratorio de forma eficiente\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-md p-3 mb-3 border border-gray-100\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col sm:flex-row items-center justify-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"fecha\",\n            className: \"text-sm font-semibold text-gray-700\",\n            children: \"Selecciona una fecha:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            id: \"fecha\",\n            name: \"fecha\",\n            value: fechaSeleccionada,\n            onChange: e => setFechaSeleccionada(e.target.value),\n            min: obtenerFechaActual(),\n            className: \"px-3 py-1 border-2 border-blue-200 rounded-md focus:border-blue-500 focus:ring-1 focus:ring-blue-200 focus:outline-none transition-all duration-200 text-center text-sm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), semanaInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gradient-to-r from-blue-100 to-indigo-100 rounded-lg border border-blue-200 p-2 mb-3 text-center animate-fade-in\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-blue-700 font-bold text-sm\",\n          children: [\"Semana \", semanaInfo.semana]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-blue-600 text-xs\",\n          children: [semanaInfo.lunes, \" al \", semanaInfo.viernes]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-lg overflow-hidden border border-gray-100 h-96\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-auto h-full\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"w-full border-collapse\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"sticky top-0\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"bg-gradient-to-r from-blue-600 to-purple-600 text-white\",\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-2 py-2 text-center font-semibold text-xs uppercase tracking-wider border-r border-blue-700\",\n                  children: \"Horas/Bloq\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 19\n                }, this), diasSemana.map(dia => /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-2 py-2 text-center font-semibold text-xs uppercase tracking-wider border-r border-blue-700 last:border-r-0\",\n                  children: dia\n                }, dia, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 21\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              className: \"bg-white divide-y divide-gray-200\",\n              children: bloques.map(bloque => [0, 1].map(subIdx => /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"hover:bg-gray-50 transition-colors duration-200\",\n                children: [subIdx === 0 && /*#__PURE__*/_jsxDEV(\"td\", {\n                  rowSpan: 2,\n                  className: \"px-2 py-3 text-center bg-gradient-to-b from-gray-50 to-gray-100 border-r border-gray-200 font-medium text-gray-700\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-lg font-bold text-blue-600 mb-1\",\n                    children: bloque.id\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 264,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-gray-500 font-medium\",\n                    children: bloque.hora\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 267,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 25\n                }, this), diasSemana.map(dia => {\n                  const reservaEnSlot = reservasDelDia.find(r => r.dia === dia && String(r.bloque) === String(bloque.id) && r.subBloque === subBloques[subIdx]);\n                  const existeReserva = !!reservaEnSlot;\n                  return /*#__PURE__*/_jsxDEV(\"td\", {\n                    onClick: () => !existeReserva && fechaSeleccionada && handleCeldaClick(bloque, dia, subBloques[subIdx]),\n                    className: `px-2 py-2 text-center border-r border-gray-200 last:border-r-0 transition-all duration-200 min-h-[40px] ${existeReserva ? 'bg-gradient-to-br from-red-100 to-pink-100 cursor-not-allowed' : fechaSeleccionada ? 'bg-gradient-to-br from-green-50 to-emerald-50 cursor-pointer hover:from-green-100 hover:to-emerald-100 hover:shadow-md' : 'bg-gray-50 cursor-not-allowed'}`,\n                    children: existeReserva ? /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"space-y-0.5\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"font-bold text-red-700 text-xs\",\n                        children: \"Reservado\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 295,\n                        columnNumber: 33\n                      }, this), reservaEnSlot && /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"text-xs text-red-600\",\n                          children: reservaEnSlot.curso\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 298,\n                          columnNumber: 37\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"text-xs text-red-500\",\n                          children: reservaEnSlot.asignatura\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 301,\n                          columnNumber: 37\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"text-xs text-red-400\",\n                          children: reservaEnSlot.profesor\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 304,\n                          columnNumber: 37\n                        }, this)]\n                      }, void 0, true)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 294,\n                      columnNumber: 31\n                    }, this) : fechaSeleccionada && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center justify-center h-full\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-green-600 font-medium text-xs px-1 py-0.5 bg-green-100 rounded\",\n                        children: \"Disponible\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 313,\n                        columnNumber: 35\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 312,\n                      columnNumber: 33\n                    }, this)\n                  }, `${bloque.id}-${dia}-${subIdx}`, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 282,\n                    columnNumber: 27\n                  }, this);\n                })]\n              }, `${bloque.id}-${subIdx}`, true, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 21\n              }, this)))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 p-4 bg-indigo-50 rounded-lg border border-indigo-200\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-lg font-bold text-indigo-700 mb-2\",\n            children: \"\\uD83D\\uDCC5 \\xBFQuieres ver todas las reservas del mes?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/calendario\",\n            className: \"inline-block bg-indigo-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-indigo-700 transition-colors duration-200\",\n            children: \"Ver Calendario Mensual\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-indigo-600 mt-2\",\n            children: \"Las reservas que hagas aqu\\xED aparecer\\xE1n autom\\xE1ticamente en el calendario\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 bg-gray-50 rounded-lg p-4 border border-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-bold text-gray-700 mb-2\",\n          children: \"\\uD83D\\uDCCA Estad\\xEDsticas del Sistema:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-100 p-3 rounded-lg text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-blue-600\",\n              children: todasLasReservas.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-blue-700\",\n              children: \"Total Reservas\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-green-100 p-3 rounded-lg text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-green-600\",\n              children: reservasDelDia.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-green-700\",\n              children: \"Reservas Hoy\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-purple-100 p-3 rounded-lg text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-purple-600\",\n              children: new Set(todasLasReservas.map(r => r.profesor)).size\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-purple-700\",\n              children: \"Profesores Activos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }, this), todasLasReservas.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-medium text-gray-700 mb-2\",\n            children: \"\\uD83D\\uDD52 \\xDAltimas 3 Reservas:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: todasLasReservas.slice(-3).reverse().map(reserva => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white p-2 rounded border text-xs\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: reserva.curso\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 21\n              }, this), \" - \", reserva.asignatura, \" |\", new Date(reserva.fecha).toLocaleDateString('es-ES'), \" | Bloque \", reserva.bloque, \" (\", reserva.subBloque, \") |\", reserva.profesor]\n            }, reserva.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this), modalAbierto && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 animate-fade-in\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-2xl max-w-sm w-full max-h-[67vh] animate-bounce-in\",\n          style: {\n            boxShadow: '8px 8px 25px rgba(0, 0, 0, 0.3), 4px 4px 15px rgba(0, 0, 0, 0.2)'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-bold text-center mb-4 text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600\",\n              children: \"Registrar Reserva\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSubmitReserva,\n              className: \"space-y-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-semibold text-gray-700 mb-1\",\n                  children: \"Curso:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 397,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  name: \"curso\",\n                  value: formData.curso,\n                  onChange: handleInputChange,\n                  required: true,\n                  className: \"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition-all duration-200\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Selecciona un curso\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 407,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"1\\xB0A\",\n                    children: \"1\\xB0A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 408,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"1\\xB0B\",\n                    children: \"1\\xB0B\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 409,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"1\\xB0C\",\n                    children: \"1\\xB0C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 410,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"2\\xB0A\",\n                    children: \"2\\xB0A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 411,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"2\\xB0B\",\n                    children: \"2\\xB0B\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 412,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"2\\xB0C\",\n                    children: \"2\\xB0C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 413,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"3\\xB0A\",\n                    children: \"3\\xB0A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 414,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"3\\xB0B\",\n                    children: \"3\\xB0B\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 415,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"3\\xB0C\",\n                    children: \"3\\xB0C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 416,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"4\\xB0A\",\n                    children: \"4\\xB0A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 417,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"4\\xB0B\",\n                    children: \"4\\xB0B\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 418,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"4\\xB0C\",\n                    children: \"4\\xB0C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 419,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"5\\xB0A\",\n                    children: \"5\\xB0A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 420,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"5\\xB0B\",\n                    children: \"5\\xB0B\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 421,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"5\\xB0C\",\n                    children: \"5\\xB0C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 422,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"6\\xB0A\",\n                    children: \"6\\xB0A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 423,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"6\\xB0B\",\n                    children: \"6\\xB0B\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 424,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"6\\xB0C\",\n                    children: \"6\\xB0C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 425,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"7\\xB0A\",\n                    children: \"7\\xB0A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 426,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"7\\xB0B\",\n                    children: \"7\\xB0B\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 427,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"7\\xB0C\",\n                    children: \"7\\xB0C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 428,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"8\\xB0A\",\n                    children: \"8\\xB0A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 429,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"8\\xB0B\",\n                    children: \"8\\xB0B\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 430,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"8\\xB0C\",\n                    children: \"8\\xB0C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 431,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 400,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-semibold text-gray-700 mb-1\",\n                  children: \"Asignatura:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 436,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"asignatura\",\n                  value: formData.asignatura,\n                  onChange: handleInputChange,\n                  required: true,\n                  className: \"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition-all duration-200\",\n                  placeholder: \"Ej: Matem\\xE1ticas\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 439,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 435,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-semibold text-gray-700 mb-1\",\n                  children: \"Profesor:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"profesor\",\n                  value: formData.profesor,\n                  onChange: handleInputChange,\n                  required: true,\n                  className: \"w-full px-3 py-2 border-2 border-gray-200 rounded-lg bg-gray-50 text-gray-600 cursor-not-allowed\",\n                  readOnly: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 454,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-semibold text-gray-700 mb-1\",\n                  children: \"Bloque:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 466,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  name: \"bloque\",\n                  value: formData.bloque,\n                  onChange: handleInputChange,\n                  required: true,\n                  className: \"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition-all duration-200\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Selecciona un bloque\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 476,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"Bloque completo\",\n                    children: \"Bloque completo\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 477,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"1\\xB0 hora\",\n                    children: \"1\\xB0 hora\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 478,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"2\\xB0 hora\",\n                    children: \"2\\xB0 hora\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 479,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 469,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 465,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-semibold text-gray-700 mb-1\",\n                  children: \"Fecha:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 484,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  name: \"fecha\",\n                  value: formData.fecha,\n                  onChange: handleInputChange,\n                  required: true,\n                  className: \"w-full px-3 py-2 border-2 border-gray-200 rounded-lg bg-gray-50 text-gray-600 cursor-not-allowed\",\n                  readOnly: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 487,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 483,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex gap-3 pt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: cerrarModal,\n                  className: \"flex-1 px-4 py-2 border-2 border-red-500 text-red-500 rounded-lg hover:bg-red-50 transition-all duration-200 font-semibold\",\n                  children: \"Cancelar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 499,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  className: \"flex-1 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl\",\n                  children: \"Registrar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 506,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mt-6 pt-4 border-t border-gray-200\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-gray-500 leading-tight\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Desarrollado por Bit Core\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"para Jorge Z\\xFA\\xF1iga U.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 5\n  }, this);\n};\n_s(ReservasPage, \"yPpHTTVLw+FzNWA/J+dRiErq85U=\");\n_c = ReservasPage;\nexport default ReservasPage;\nvar _c;\n$RefreshReg$(_c, \"ReservasPage\");","map":{"version":3,"names":["React","useState","useContext","useEffect","AuthContext","obtenerReservas","guardarReserva","existeReservaEnSlot","formatearReservaDesdeFormulario","obtenerReservasPorFecha","jsxDEV","_jsxDEV","Fragment","_Fragment","bloques","id","hora","diasSemana","subBloques","getSemanaInfo","fechaStr","fecha","Date","diaSemana","getDay","lunes","setDate","getDate","viernes","temp","getTime","setHours","firstThursday","setMonth","weekNumber","Math","round","format","d","toLocaleDateString","day","month","year","semana","ReservasPage","_s","user","fechaSeleccionada","setFechaSeleccionada","modalAbierto","setModalAbierto","reservaSeleccionada","setReservaSeleccionada","formData","setFormData","curso","asignatura","profesor","nombre","bloque","tipoBloque","reservasDelDia","setReservasDelDia","todasLasReservas","setTodasLasReservas","semanaInfo","obtenerFechaActual","hoy","toISOString","split","cargarReservas","reservas","error","console","todas","handleCeldaClick","dia","subBloque","existe","alert","handleInputChange","e","target","name","value","handleSubmitReserva","preventDefault","datosReserva","reservaGuardada","reservasActualizadas","todasActualizadas","cerrarModal","className","children","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","type","onChange","min","map","subIdx","rowSpan","reservaEnSlot","find","r","String","existeReserva","onClick","href","length","Set","size","slice","reverse","reserva","style","boxShadow","onSubmit","required","placeholder","readOnly","_c","$RefreshReg$"],"sources":["C:/Users/Jorge/Desktop/Reservas/frontend/src/pages/ReservasPage.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { \r\n  obtenerReservas, \r\n  guardarReserva, \r\n  existeReservaEnSlot, \r\n  formatearReservaDesdeFormulario,\r\n  obtenerReservasPorFecha \r\n} from '../utils/reservasService';\r\n\r\nconst bloques = [\r\n  { id: 1, hora: '08:00 - 10:00' },\r\n  { id: 2, hora: '10:00 - 12:00' },\r\n  { id: 3, hora: '12:00 - 14:00' },\r\n  { id: 4, hora: '14:00 - 16:00' },\r\n  { id: 5, hora: '16:00 - 18:00' },\r\n];\r\n\r\nconst diasSemana = ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes'];\r\nconst subBloques = ['1° hora', '2° hora'];\r\n\r\n// Función para obtener el número de semana y el rango de lunes a viernes\r\nfunction getSemanaInfo(fechaStr) {\r\n  if (!fechaStr) return null;\r\n  const fecha = new Date(fechaStr + 'T00:00:00');\r\n  // Obtener el día de la semana (0=domingo, 1=lunes, ...)\r\n  const diaSemana = fecha.getDay();\r\n  // Calcular el lunes de esa semana\r\n  const lunes = new Date(fecha);\r\n  lunes.setDate(fecha.getDate() - ((diaSemana + 6) % 7));\r\n  // Calcular el viernes de esa semana\r\n  const viernes = new Date(lunes);\r\n  viernes.setDate(lunes.getDate() + 4);\r\n  // Número de semana ISO-8601\r\n  const temp = new Date(lunes.getTime());\r\n  temp.setHours(0,0,0,0);\r\n  temp.setDate(temp.getDate() + 3 - ((temp.getDay() + 6) % 7));\r\n  const firstThursday = temp.getTime();\r\n  temp.setMonth(0, 1);\r\n  if (temp.getDay() !== 4) {\r\n    temp.setMonth(0, 1 + ((4 - temp.getDay()) + 7) % 7);\r\n  }\r\n  const weekNumber = 1 + Math.round((firstThursday - temp.getTime()) / (7 * 24 * 3600 * 1000));\r\n  // Formatear fechas\r\n  const format = d => d.toLocaleDateString('es-ES', { day: '2-digit', month: '2-digit', year: 'numeric' });\r\n  return {\r\n    semana: weekNumber,\r\n    lunes: format(lunes),\r\n    viernes: format(viernes)\r\n  };\r\n}\r\n\r\nconst ReservasPage = () => {\r\n  const { user } = useContext(AuthContext);\r\n  const [fechaSeleccionada, setFechaSeleccionada] = useState('');\r\n  const [modalAbierto, setModalAbierto] = useState(false);\r\n  const [reservaSeleccionada, setReservaSeleccionada] = useState(null);\r\n  const [formData, setFormData] = useState({\r\n    curso: '',\r\n    asignatura: '',\r\n    profesor: user?.nombre || '',\r\n    bloque: '',\r\n    fecha: '',\r\n    tipoBloque: 'completo',\r\n  });\r\n  const [reservasDelDia, setReservasDelDia] = useState([]);\r\n  const [todasLasReservas, setTodasLasReservas] = useState([]);\r\n\r\n  const semanaInfo = getSemanaInfo(fechaSeleccionada);\r\n\r\n  const obtenerFechaActual = () => {\r\n    const hoy = new Date();\r\n    return hoy.toISOString().split('T')[0];\r\n  };\r\n\r\n  // Cargar reservas cuando cambia la fecha\r\n  useEffect(() => {\r\n    const cargarReservas = async () => {\r\n      if (fechaSeleccionada) {\r\n        try {\r\n          const reservas = await obtenerReservasPorFecha(fechaSeleccionada);\r\n          setReservasDelDia(reservas);\r\n        } catch (error) {\r\n          console.error('Error al cargar reservas del día:', error);\r\n          setReservasDelDia([]);\r\n        }\r\n      } else {\r\n        setReservasDelDia([]);\r\n      }\r\n      \r\n      // Cargar todas las reservas para el debug\r\n      try {\r\n        const todas = await obtenerReservas();\r\n        setTodasLasReservas(todas);\r\n      } catch (error) {\r\n        console.error('Error al cargar todas las reservas:', error);\r\n        setTodasLasReservas([]);\r\n      }\r\n    };\r\n\r\n    cargarReservas();\r\n  }, [fechaSeleccionada]);\r\n\r\n  // Al hacer click en una celda, guardar la info de la celda y abrir el modal\r\n  const handleCeldaClick = async (bloque, dia, subBloque) => {\r\n    try {\r\n      // Verificar si ya existe una reserva en este slot\r\n      const existe = await existeReservaEnSlot(fechaSeleccionada, dia, bloque.id, subBloque);\r\n      if (existe) {\r\n        alert('Ya existe una reserva en este horario. Selecciona otro slot disponible.');\r\n        return;\r\n      }\r\n\r\n      setReservaSeleccionada({ bloque, dia, subBloque });\r\n      setFormData({\r\n        ...formData,\r\n        bloque: `${bloque.id} - ${bloque.hora} (${subBloque})`,\r\n        fecha: fechaSeleccionada,\r\n        profesor: user?.nombre || '',\r\n        tipoBloque: 'completo',\r\n      });\r\n      setModalAbierto(true);\r\n    } catch (error) {\r\n      console.error('Error al verificar disponibilidad:', error);\r\n      alert('Error al verificar disponibilidad. Inténtalo de nuevo.');\r\n    }\r\n  };\r\n\r\n  // Función para manejar cambios en el formulario\r\n  const handleInputChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  // Guardar la reserva usando el sistema de almacenamiento\r\n  const handleSubmitReserva = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    try {\r\n      const datosReserva = formatearReservaDesdeFormulario(formData, reservaSeleccionada);\r\n      const reservaGuardada = await guardarReserva(datosReserva);\r\n      \r\n      if (reservaGuardada) {\r\n        // Actualizar la lista de reservas del día\r\n        const reservasActualizadas = await obtenerReservasPorFecha(fechaSeleccionada);\r\n        setReservasDelDia(reservasActualizadas);\r\n        \r\n        // Actualizar todas las reservas para el debug\r\n        const todasActualizadas = await obtenerReservas();\r\n        setTodasLasReservas(todasActualizadas);\r\n        \r\n        // Mostrar mensaje de éxito\r\n        alert(`¡Reserva creada exitosamente! \r\n        \r\nDetalles:\r\n- Curso: ${formData.curso}\r\n- Asignatura: ${formData.asignatura}\r\n- Fecha: ${formData.fecha}\r\n- Bloque: ${formData.bloque}\r\n- Profesor: ${formData.profesor}\r\n        \r\nLa reserva aparecerá automáticamente en el calendario público.`);\r\n      } else {\r\n        alert('Error al guardar la reserva. Inténtalo de nuevo.');\r\n      }\r\n      \r\n      setModalAbierto(false);\r\n      setFormData({\r\n        curso: '',\r\n        asignatura: '',\r\n        profesor: user?.nombre || '',\r\n        bloque: '',\r\n        fecha: '',\r\n        tipoBloque: 'completo',\r\n      });\r\n    } catch (error) {\r\n      console.error('Error al procesar la reserva:', error);\r\n      alert('Error al procesar la reserva. Verifica tu conexión e inténtalo de nuevo.');\r\n    }\r\n  };\r\n\r\n  const cerrarModal = () => {\r\n    setModalAbierto(false);\r\n    setFormData({\r\n      curso: '',\r\n      asignatura: '',\r\n      profesor: user?.nombre || '',\r\n      bloque: '',\r\n      fecha: '',\r\n      tipoBloque: 'completo',\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50\">\r\n      <div className=\"max-w-6xl mx-auto p-2 sm:p-3 lg:p-4\">\r\n        {/* Header */}\r\n        <div className=\"text-center mb-4\">\r\n          <h1 className=\"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-1\">\r\n            Sistema de Reservas\r\n          </h1>\r\n          <p className=\"text-gray-600 text-sm\">\r\n            Gestiona las reservas del laboratorio de forma eficiente\r\n          </p>\r\n        </div>\r\n\r\n        {/* Selector de fecha */}\r\n        <div className=\"bg-white rounded-lg shadow-md p-3 mb-3 border border-gray-100\">\r\n          <div className=\"flex flex-col sm:flex-row items-center justify-center gap-2\">\r\n            <label htmlFor=\"fecha\" className=\"text-sm font-semibold text-gray-700\">\r\n              Selecciona una fecha:\r\n            </label>\r\n            <input \r\n              type=\"date\" \r\n              id=\"fecha\" \r\n              name=\"fecha\" \r\n              value={fechaSeleccionada}\r\n              onChange={(e) => setFechaSeleccionada(e.target.value)}\r\n              min={obtenerFechaActual()}\r\n              className=\"px-3 py-1 border-2 border-blue-200 rounded-md focus:border-blue-500 focus:ring-1 focus:ring-blue-200 focus:outline-none transition-all duration-200 text-center text-sm\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Info de la semana seleccionada */}\r\n        {semanaInfo && (\r\n          <div className=\"bg-gradient-to-r from-blue-100 to-indigo-100 rounded-lg border border-blue-200 p-2 mb-3 text-center animate-fade-in\">\r\n            <div className=\"text-blue-700 font-bold text-sm\">\r\n              Semana {semanaInfo.semana}\r\n            </div>\r\n            <div className=\"text-blue-600 text-xs\">\r\n              {semanaInfo.lunes} al {semanaInfo.viernes}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Tabla de horarios */}\r\n        <div className=\"bg-white rounded-lg shadow-lg overflow-hidden border border-gray-100 h-96\">\r\n          <div className=\"overflow-auto h-full\">\r\n            <table className=\"w-full border-collapse\">\r\n              <thead className=\"sticky top-0\">\r\n                <tr className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white\">\r\n                  <th className=\"px-2 py-2 text-center font-semibold text-xs uppercase tracking-wider border-r border-blue-700\">\r\n                    Horas/Bloq\r\n                  </th>\r\n                  {diasSemana.map(dia => (\r\n                    <th key={dia} className=\"px-2 py-2 text-center font-semibold text-xs uppercase tracking-wider border-r border-blue-700 last:border-r-0\">\r\n                      {dia}\r\n                    </th>\r\n                  ))}\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {bloques.map(bloque => (\r\n                  [0, 1].map(subIdx => (\r\n                    <tr key={`${bloque.id}-${subIdx}`} className=\"hover:bg-gray-50 transition-colors duration-200\">\r\n                      {subIdx === 0 && (\r\n                        <td\r\n                          rowSpan={2}\r\n                          className=\"px-2 py-3 text-center bg-gradient-to-b from-gray-50 to-gray-100 border-r border-gray-200 font-medium text-gray-700\"\r\n                        >\r\n                          <div className=\"text-lg font-bold text-blue-600 mb-1\">\r\n                            {bloque.id}\r\n                          </div>\r\n                          <div className=\"text-xs text-gray-500 font-medium\">\r\n                            {bloque.hora}\r\n                          </div>\r\n                        </td>\r\n                      )}\r\n                      {diasSemana.map(dia => {\r\n                        const reservaEnSlot = reservasDelDia.find(r =>\r\n                          r.dia === dia &&\r\n                          String(r.bloque) === String(bloque.id) &&\r\n                          r.subBloque === subBloques[subIdx]\r\n                        );\r\n                        \r\n                        const existeReserva = !!reservaEnSlot;\r\n                        \r\n                        return (\r\n                          <td\r\n                            key={`${bloque.id}-${dia}-${subIdx}`}\r\n                            onClick={() => !existeReserva && fechaSeleccionada && handleCeldaClick(bloque, dia, subBloques[subIdx])}\r\n                            className={`px-2 py-2 text-center border-r border-gray-200 last:border-r-0 transition-all duration-200 min-h-[40px] ${\r\n                              existeReserva \r\n                                ? 'bg-gradient-to-br from-red-100 to-pink-100 cursor-not-allowed' \r\n                                : fechaSeleccionada \r\n                                  ? 'bg-gradient-to-br from-green-50 to-emerald-50 cursor-pointer hover:from-green-100 hover:to-emerald-100 hover:shadow-md' \r\n                                  : 'bg-gray-50 cursor-not-allowed'\r\n                            }`}\r\n                          >\r\n                            {existeReserva ? (\r\n                              <div className=\"space-y-0.5\">\r\n                                <div className=\"font-bold text-red-700 text-xs\">Reservado</div>\r\n                                {reservaEnSlot && (\r\n                                  <>\r\n                                    <div className=\"text-xs text-red-600\">\r\n                                      {reservaEnSlot.curso}\r\n                                    </div>\r\n                                    <div className=\"text-xs text-red-500\">\r\n                                      {reservaEnSlot.asignatura}\r\n                                    </div>\r\n                                    <div className=\"text-xs text-red-400\">\r\n                                      {reservaEnSlot.profesor}\r\n                                    </div>\r\n                                  </>\r\n                                )}\r\n                              </div>\r\n                            ) : (\r\n                              fechaSeleccionada && (\r\n                                <div className=\"flex items-center justify-center h-full\">\r\n                                  <span className=\"text-green-600 font-medium text-xs px-1 py-0.5 bg-green-100 rounded\">\r\n                                    Disponible\r\n                                  </span>\r\n                                </div>\r\n                              )\r\n                            )}\r\n                          </td>\r\n                        );\r\n                      })}\r\n                    </tr>\r\n                  ))\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Enlace al calendario */}\r\n        <div className=\"mt-6 p-4 bg-indigo-50 rounded-lg border border-indigo-200\">\r\n          <div className=\"text-center\">\r\n            <div className=\"text-lg font-bold text-indigo-700 mb-2\">\r\n              📅 ¿Quieres ver todas las reservas del mes?\r\n            </div>\r\n            <a \r\n              href=\"/calendario\" \r\n              className=\"inline-block bg-indigo-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-indigo-700 transition-colors duration-200\"\r\n            >\r\n              Ver Calendario Mensual\r\n            </a>\r\n            <div className=\"text-sm text-indigo-600 mt-2\">\r\n              Las reservas que hagas aquí aparecerán automáticamente en el calendario\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Debug section */}\r\n        <div className=\"mt-6 bg-gray-50 rounded-lg p-4 border border-gray-200\">\r\n          <div className=\"font-bold text-gray-700 mb-2\">📊 Estadísticas del Sistema:</div>\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4\">\r\n            <div className=\"bg-blue-100 p-3 rounded-lg text-center\">\r\n              <div className=\"text-2xl font-bold text-blue-600\">{todasLasReservas.length}</div>\r\n              <div className=\"text-sm text-blue-700\">Total Reservas</div>\r\n            </div>\r\n            <div className=\"bg-green-100 p-3 rounded-lg text-center\">\r\n              <div className=\"text-2xl font-bold text-green-600\">{reservasDelDia.length}</div>\r\n              <div className=\"text-sm text-green-700\">Reservas Hoy</div>\r\n            </div>\r\n            <div className=\"bg-purple-100 p-3 rounded-lg text-center\">\r\n              <div className=\"text-2xl font-bold text-purple-600\">\r\n                {new Set(todasLasReservas.map(r => r.profesor)).size}\r\n              </div>\r\n              <div className=\"text-sm text-purple-700\">Profesores Activos</div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Últimas reservas */}\r\n          {todasLasReservas.length > 0 && (\r\n            <div>\r\n              <div className=\"font-medium text-gray-700 mb-2\">🕒 Últimas 3 Reservas:</div>\r\n              <div className=\"space-y-2\">\r\n                {todasLasReservas.slice(-3).reverse().map(reserva => (\r\n                  <div key={reserva.id} className=\"bg-white p-2 rounded border text-xs\">\r\n                    <strong>{reserva.curso}</strong> - {reserva.asignatura} | \r\n                    {new Date(reserva.fecha).toLocaleDateString('es-ES')} | \r\n                    Bloque {reserva.bloque} ({reserva.subBloque}) | \r\n                    {reserva.profesor}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Modal para registrar reserva */}\r\n        {modalAbierto && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 animate-fade-in\">\r\n            <div className=\"bg-white rounded-2xl max-w-sm w-full max-h-[67vh] animate-bounce-in\" style={{boxShadow: '8px 8px 25px rgba(0, 0, 0, 0.3), 4px 4px 15px rgba(0, 0, 0, 0.2)'}}>\r\n              <div className=\"p-4\">\r\n                <h2 className=\"text-xl font-bold text-center mb-4 text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600\">\r\n                  Registrar Reserva\r\n                </h2>\r\n                \r\n                <form onSubmit={handleSubmitReserva} className=\"space-y-3\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-1\">\r\n                      Curso:\r\n                    </label>\r\n                    <select\r\n                      name=\"curso\"\r\n                      value={formData.curso}\r\n                      onChange={handleInputChange}\r\n                      required\r\n                      className=\"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition-all duration-200\"\r\n                    >\r\n                      <option value=\"\">Selecciona un curso</option>\r\n                      <option value=\"1°A\">1°A</option>\r\n                      <option value=\"1°B\">1°B</option>\r\n                      <option value=\"1°C\">1°C</option>\r\n                      <option value=\"2°A\">2°A</option>\r\n                      <option value=\"2°B\">2°B</option>\r\n                      <option value=\"2°C\">2°C</option>\r\n                      <option value=\"3°A\">3°A</option>\r\n                      <option value=\"3°B\">3°B</option>\r\n                      <option value=\"3°C\">3°C</option>\r\n                      <option value=\"4°A\">4°A</option>\r\n                      <option value=\"4°B\">4°B</option>\r\n                      <option value=\"4°C\">4°C</option>\r\n                      <option value=\"5°A\">5°A</option>\r\n                      <option value=\"5°B\">5°B</option>\r\n                      <option value=\"5°C\">5°C</option>\r\n                      <option value=\"6°A\">6°A</option>\r\n                      <option value=\"6°B\">6°B</option>\r\n                      <option value=\"6°C\">6°C</option>\r\n                      <option value=\"7°A\">7°A</option>\r\n                      <option value=\"7°B\">7°B</option>\r\n                      <option value=\"7°C\">7°C</option>\r\n                      <option value=\"8°A\">8°A</option>\r\n                      <option value=\"8°B\">8°B</option>\r\n                      <option value=\"8°C\">8°C</option>\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-1\">\r\n                      Asignatura:\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"asignatura\"\r\n                      value={formData.asignatura}\r\n                      onChange={handleInputChange}\r\n                      required\r\n                      className=\"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition-all duration-200\"\r\n                      placeholder=\"Ej: Matemáticas\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-1\">\r\n                      Profesor:\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"profesor\"\r\n                      value={formData.profesor}\r\n                      onChange={handleInputChange}\r\n                      required\r\n                      className=\"w-full px-3 py-2 border-2 border-gray-200 rounded-lg bg-gray-50 text-gray-600 cursor-not-allowed\"\r\n                      readOnly\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-1\">\r\n                      Bloque:\r\n                    </label>\r\n                    <select\r\n                      name=\"bloque\"\r\n                      value={formData.bloque}\r\n                      onChange={handleInputChange}\r\n                      required\r\n                      className=\"w-full px-3 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition-all duration-200\"\r\n                    >\r\n                      <option value=\"\">Selecciona un bloque</option>\r\n                      <option value=\"Bloque completo\">Bloque completo</option>\r\n                      <option value=\"1° hora\">1° hora</option>\r\n                      <option value=\"2° hora\">2° hora</option>\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-1\">\r\n                      Fecha:\r\n                    </label>\r\n                    <input\r\n                      type=\"date\"\r\n                      name=\"fecha\"\r\n                      value={formData.fecha}\r\n                      onChange={handleInputChange}\r\n                      required\r\n                      className=\"w-full px-3 py-2 border-2 border-gray-200 rounded-lg bg-gray-50 text-gray-600 cursor-not-allowed\"\r\n                      readOnly\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex gap-3 pt-2\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={cerrarModal}\r\n                      className=\"flex-1 px-4 py-2 border-2 border-red-500 text-red-500 rounded-lg hover:bg-red-50 transition-all duration-200 font-semibold\"\r\n                    >\r\n                      Cancelar\r\n                    </button>\r\n                    <button\r\n                      type=\"submit\"\r\n                      className=\"flex-1 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl\"\r\n                    >\r\n                      Registrar\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n                      </div>\r\n          )}\r\n\r\n          {/* Pie de página */}\r\n          <div className=\"text-center mt-6 pt-4 border-t border-gray-200\">\r\n            <div className=\"text-xs text-gray-500 leading-tight\">\r\n              <div>Desarrollado por Bit Core</div>\r\n              <div>para Jorge Zúñiga U.</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\nexport default ReservasPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}